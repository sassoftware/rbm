rBuilder Mirror Installation Quick Start Guide

This document describes the steps necessary to install the rBuilder Mirror
software appliance on the hardware you've provided.

Prerequisites
-------------

Before you begin, make sure you have the necessary hardware and network
connectivity in place, namely:

    o A network-connected dedicated x86 server with at least 40GB of local
      storage, and a CD-ROM or DVD-ROM drive.  The server must be
      configured to boot from the CD-ROM/DVD-ROM.

      NOTE: rBuilder Mirror is packaged as a software appliance.  As such,
      it is configured to run on dedicated hardware, including all
      locally-attached disk storage.  DO NOT INSTALL ON HARDWARE CONTAINING
      DATA YOU WISH TO KEEP -- THIS INSTALLATION WILL WIPE ALL LOCAL
      STORAGE!

    o A network connection for the server with either a static or dynamic
      IP address accessible by an unchanging fully-qualified domain name
      (the FQDN we will use throughout this document is
      mirror.example.com)

    o A network-connected system capable of running a Web browser

Installation Procedure
------------ ---------

Now that you have the necessary materials available, it is time to install
the rBuilder Mirror:

1. Insert the rBuilder Mirror CD-ROM into the server's CD-ROM drive and
   boot the computer, ensuring that it boots from the CD-ROM.

    WARNING: PERFORMING THIS INSTALLATION WILL DELETE ALL PRE-EXISTING DATA
    ON THIS SYSTEM!

2. Follow the on-screen instructions during the installation, taking care
   to note the following points related to filesystem creation:

    o During installation, you can choose to automatically or manually
      partition the system.  In most cases, you should choose the default
      (which is to automatically partition) -- you will be given the
      opportunity to review and, if necessary, modify the the default
      partitions.

    o The rBuilder Mirror stores all its data under /srv/; a dedicated
      filesystem with sufficient storage must be allocated for this
      purpose.  Note that the default partitioning settings allocate the
      bulk of the system's local storage to /srv/ for you.  However, should
      you wish to place the Mirror-specific data on network-attached
      storage that more directly integrates with your organization's IT
      infrastructure, you can modify the settings so that /srv/ is an
      NFS-mounted filesystem.

3. When the installation finishes, reboot (making sure to configure the
   system to boot from its primary disk drive).

rAA Configuration
--- -------------

Now that the rBuilder Mirror is up and running, it is time to configure
it from a system-level perspective.  For that, it is necessary to use the
Mirror's rAA (rPath Appliance Agent) interface.  rAA makes it possible
for your rBuilder Mirror to receive updated software, and perform other
system-level tasks:

1. Use a Web browser to access the server.  Use a URL in the form
   "http://mirror.example.com/", replacing "mirror.example.com" with your
   server's fully-qualified domain name.

   NOTE: you MUST use the fully-qualified domain name to access the server!

*** FIXME -- SSL is not currently used, but it probably should be, meaning
    the warning message text will need to be kept ***

2. The rAA "sign in" box appears in the new window.  (You may see warning
   messages about the certificate being used not being created by a
   recognized Certificate Authority; this is normal.)  Sign in using the
   following information (you will be changing the password in a moment):

    o Username: admin
    o Password: password

3. The rAA interface is now displayed.  Because this is the first time rAA
   has been used on your rBuilder Mirror, you will be directed through
   the rAA Wizard to perform the necessary first-time configuration.  Click
   on the "OK" button.

4. Next, the rAA Wizard steps you through the following configuration
   dialogs:

    o Change Password -- Enter the current rAA administrator password and
      the new password.  Click on the "Change Password" button.

    o Email Configuration -- Enter the FQDN of the system that accepts
      email sent within your organization, and an email address that should
      be used as the "from" address for all email sent by rAA.  Click on
      the "OK" button.

    o Email Notification Addresses -- Follow the on-screen instructions to
      add one or more email addresses that should receive email
      notifications from rAA.  When finished, click on the "OK" button.

    o Entitlement Management -- Entitlements control access to software
      updates for the rBuilder Mirror.  Enter the rBuilder Mirror
      entitlement you've received, and click on the "Apply" button.

5. Once the rAA Wizard has gone through each dialog, the full rAA menu
   appears to the left.

Configuring *** FIXME -- What's the term? ***
----------- --- ----- -- ------ --- ----- ---

With the system-level configuration completed, it is now time to prepare
your rBuilder Mirror's repository to receive software from one or more
rBuilder Appliances:

1. 

Adding Users
------ -----

Now that the overall rBuilder Mirror has been installed and configured, it
is time to set up the user account(s) appropriate for your Mirror's
intended use:

1. Click on the "Manage Users" link in the rAA menu.

2. A tabbed interface appears.  Click on the "Add User" tab.

3. Enter the username and password for the new user.  Under "Permission",
   you have the following options:

*** FIXME -- Need a Conary expert to vet this part ***

    o Mirroring -- A user with Mirroring permission has the ability to
      either write mirror image copies of other Conary repositories into
      the rBuilder Mirror, or to read mirror image copies from the rBuilder
      Mirror into other Conary repositories.

    o Anonymous -- A user with Anonymous permission has read-only access to
      the contents of the rBuilder Mirror's repository without any kind of
      authentication.  NOTE: Selecting this permission causes the username
      and password to be automatically filled in.

    o Admin -- A user with Admin permission has the ability to perform
      administrative tasks on the rBuilder Mirror's underlying Conary
      repository.

    Click on the "Apply" button to create the user.

4. Your rBuilder Mirror requires no further configuration at this time.
   Click on the "logout" link on the right side of the upper navigation
   bar.

Additional Notes
---------- -----

The following notes contain information about your rBuilder Mirror:

    Text editor -- Your rBuilder Mirror includes the nano text editor.
    Under normal circumstances it should not be necessary to directly edit
    files (all normal configuration is done via the Web-based
    administrative interface), but should the need arise the editor can be
    launched by entering the "nano" command.
